\chapter{Introduction}



A~real-time whole-planet renderer must work with huge amounts of terrain data. In order to reach reasonable frame rates, its rendering pipeline has to use some kind of multiresolution (LOD-ing\footnote{LOD is the~abbreviation of level of detail - degradation of quality of the~displayed data with the~growing distance in order to optimize the~rendering}) approach. There is a~survey paper summarizing the~best known multiresolution terrain rendering methods~\cite{survey}. Some of them are designed to render just a~flat area, others are able to render the~whole planet. In the~rest of this chapter, we will briefly describe those of them which also contain terrain data compression.

C-BDAM\footnote{Compressed Batched Dynamic Adaptive Meshes}~\cite{cbdam} and P-BDAM\footnote{Planet Sized Batched Dynamic Adaptive Meshes}~\cite{pbdam} perform the~compression in the~refinement of a~node of their~LOD hierarchy. Once the~values of a~certain node are known, they are used to predict the~values of its children as accurately as possible. After that, the~differences between these~predictions and the~real values are computed. These are called residuals. With the~help of them, the~real values can be restored with absolute accuracy. However, the~residuals are then quantized to achieve better compression ratio which means that the~compression is lossy. Then, they are losslessly compressed by an~entropy codec. Both these methods are able to compute the~residuals in the~way which ensures that the~error of the~reconstructed data is kept within a~maximum error bound adjustable by the~user in every node of their LOD hierarchy. This can be achieved by a~slight modification of the~second-generation wavelet lifting scheme~\cite{two-stage}. C-BDAM is designed to render just a~flat area, whereas P-BDAM is able to render the~whole planet.

Another paper~\cite{jpeg2000terrain} describes a~method for rendering a~flat portion of terrain. This method contains data compression based on the~same principle - the~residuals needed to reconstruct the~children of a~square node of the~terrain LOD hierarchy are compressed. The~computation of residuals is based on the~wavelet-based JPEG2000 standard. This method is not able to reconstruct the~data within a~certain maximum-error bound which makes it less interesting to us. Besides, the~visual artifacts between adjacent nodes of different LODs are not handled by its rendering pipeline.

The~aim of our meth

In practice, many applications handle the~real-time rendering well with LOD schemes tailored to their needs. In such cases, a~compression method tied to a~concrete LOD scheme (which is the case of the~mentioned methods) is not feasible. This method handles only the~compression, so it can be used as a~plug~\&~play component in an existing real-time renderer. Its only job is to compress a~block of terrain height samples sized $2^n x 2^n$ and to provide fast progressive decompression of its mip-maps, while respecting the~maximum error bound at every mip-map. The~source code of the~method is written modularly, so that any representation of the~height samples can be compressed - doubles, floats or even arbitrary structures. It is inspired by C-BDAM - the~compression method is extracted from the~LOD scheme and simplified.

As a~case study we have implemented this method as a plugin into an~application, which transforms the heights on the planet surface into 256x256 blocks of 32-bit float samples in the unit of meters, which are then stored separately and during the run fetched into a quadtree-based LOD hierarchy. The~mip-maps of the~blocks are used while looking at them from a side.

This approach introduces heavy redundancy of the~data - a~block corresponding to a~certain quadtree node contains simplified blocks of its children and all these blocks are stored separately. To the~contrary, in C-BDAM only the~residuals needed to reconstruct the~children from the~parent node are stored.\footnote{The LOD structure in C-BDAM is not a~quadtree, though} However, the reason why this approach is used is that the user can navigate to any area almost immediately - only the data needed for the~scene has to be fetched, without having to reconstruct it by traversing from the root. Moreover, this approach enables the user to flexibly extend the terrain data by high-resolution insets. The~mentioned redundancy of the~data emphasizes the~need for as~efficient compression method as possible, doing only what is required - providing the~mip-maps while respecting the~maximum-error bound of the~samples inside each one of them.

In Chapter~\ref{chap:wavelets_comp}, we briefly describe the~basic theory of wavelets and link C-BDAM and this method to it, in Chapter~\ref{chap:outline}, we briefly describe the~basic outline of the~method. In Chapter~\ref{chap:details}, we describe the~details of the~method. In Chapter~\ref{chap:cbdam_comp}, we compare the~core algorithm of this method to the~algorithm of C-BDAM. We present the~results in Section~\ref{sec:results} and then discuss them in Section~\ref{sec:conclusion}.
